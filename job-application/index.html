<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #f0f2f5;
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        .checkbox-label {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    cursor: pointer;
}

.checkbox-label input[type="checkbox"] {
    margin-right: 10px;
    cursor: pointer;
}

#prevEmploymentFields {
    transition: opacity 0.3s ease;
}
        /* Info icon styling */
.info-icon {
    color: #3498db;
    cursor: help;
    margin-left: 5px;
    display: inline-block;
}

/* Error message enhancement */
.error-message {
    color: #e74c3c;
    font-size: 0.8rem;
    margin-top: 5px;
    transition: all 0.3s ease;
    font-weight: 500;
}

/* Input validation styling */
input:invalid, select:invalid {
    border-color: #e74c3c;
}

input:valid.validated, select:valid.validated {
    border-color: #2ecc71;
}

/* Address character counter */
.char-counter {
    font-size: 0.7rem;
    color: #7f8c8d;
    text-align: right;
    margin-top: 2px;
}

/* Field validation indicator */
.field-validated {
    color: #2ecc71;
    margin-left: 5px;
}

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 2.2rem;
        }

        .card {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            display: none;
            border-top: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .card.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-title {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #2c3e50;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="number"],
        select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        button {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 5px;
            background: #3498db;
            color: white;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s, transform 0.1s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        button:hover {
            background: #2980b9;
        }

        button:active {
            transform: translateY(1px);
        }

        button.prev {
            background: #95a5a6;
        }

        button.prev:hover {
            background: #7f8c8d;
        }

        .required {
            color: #e74c3c;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 10px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(to right, #3498db, #2980b9);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .file-upload {
            margin-top: 0.5rem;
        }

        .login-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            text-decoration: none;
        }

        .error-message {
            color: #e74c3c;
            font-size: 0.8rem;
            margin-top: 0.2rem;
        }

        #refreshLink {
            color: blue;
            text-decoration: underline;
            cursor: pointer;
            margin-top: 10px;
            display: block;
            text-align: center;
        }

        /* Special styling for role and location cards */
        #page1, #page2 {
            background: linear-gradient(to bottom right, #ffffff, #f9fdff);
        }

        .role-options, .location-options {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin: 1rem 0;
        }

        .role-option, .location-option {
            width: 32%;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }

        .role-option:hover, .location-option:hover {
            border-color: #3498db;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .role-option.selected, .location-option.selected {
            border-color: #3498db;
            background-color: #ebf5fb;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .role-icon, .location-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: #3498db;
        }

        .role-name, .location-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .role-description, .location-description {
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-top: 0.5rem;
        }

        /* Card info sections */
        .card-info {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
            border-left: 4px solid #3498db;
        }

        .card-info h3 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .card-info p {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        /* File upload styling */
        .file-upload {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }

        .file-upload input[type="file"] {
            font-size: 100px;
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
        }

        .file-upload-label {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: #f8f9fa;
            border: 1px dashed #ccc;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            text-align: center;
            transition: all 0.3s;
        }

        .file-upload-label:hover {
            background: #e9ecef;
            border-color: #3498db;
        }

        .file-name {
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: #7f8c8d;
        }
        .custom-radio-group {
            margin-bottom: 20px;
        }

        .custom-radio-container {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }

        .custom-radio {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .custom-radio input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .radio-label {
            position: relative;
            padding-left: 30px;
            cursor: pointer;
            font-size: 16px;
            user-select: none;
        }

        .radio-label:before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid #3498db;
            border-radius: 50%;
            background-color: #fff;
        }

        .custom-radio input[type="radio"]:checked + .radio-label:before {
            border-color: #3498db;
        }

        .custom-radio input[type="radio"]:checked + .radio-label:after {
            content: '';
            position: absolute;
            left: 5px;
            top: 50%;
            transform: translateY(-50%);
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #3498db;
        }

        /* Checkbox Styling */
        .custom-checkbox {
            display: block;
            position: relative;
            padding-left: 30px;
            margin-bottom: 12px;
            cursor: pointer;
            font-size: 16px;
            user-select: none;
        }

        .custom-checkbox input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 20px;
            width: 20px;
            background-color: #fff;
            border: 2px solid #3498db;
            border-radius: 4px;
        }

        .custom-checkbox:hover input ~ .checkmark {
            background-color: #f1f9ff;
        }

        .custom-checkbox input:checked ~ .checkmark {
            background-color: #3498db;
        }

        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }

        .custom-checkbox input:checked ~ .checkmark:after {
            display: block;
        }

        .custom-checkbox .checkmark:after {
            left: 6px;
            top: 2px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
        #previousEmploymentFields {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f9f9f9;
            display: none;
        }

        /* Character Counter */
        .char-counter {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            text-align: right;
        }
        .file-name {
    display: none;
    margin-top: 5px;
    color: #2ecc71;
    font-weight: bold;
}

.reset-button {
    background-color: #e74c3c;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
}

.reset-button:hover {
    background-color: #c0392b;
}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Employee Portal</h1>
            <p>Please fill in your details</p>
        </div>

        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>

        <!-- Card 1: Role -->
        <div class="card active" id="page1">
            <h2 class="card-title">Role Selection</h2>
            
            <!-- <div class="card-info">
                <h3>Choose Your Role</h3>
                <p>Select the position that best matches your skills and experience.</p>
            </div> -->
            
            <div class="form-group">
                <label>Position <span class="required">*</span></label>
                <div class="role-options">
                    <div class="role-option" data-value="trainee" onclick="selectRole(this, 'trainee')">
                        <div class="role-icon">👨‍🎓</div>
                        <div class="role-name">Trainee</div>
                        <div class="role-description">Entry-level position for new graduates</div>
                    </div>
                    <div class="role-option" data-value="associate" onclick="selectRole(this, 'associate')">
                        <div class="role-icon">👨‍💼</div>
                        <div class="role-name">Associate</div>
                        <div class="role-description">Mid-level position with 1-3 years experience</div>
                    </div>
                    <div class="role-option" data-value="senior" onclick="selectRole(this, 'senior')">
                        <div class="role-icon">👨‍🏫</div>
                        <div class="role-name">Senior</div>
                        <div class="role-description">Senior-level position with 3+ years experience</div>
                    </div>
                </div>
                <select id="role" required style="display: none;">
                    <option value="">Select Role</option>
                    <option value="trainee">Trainee</option>
                    <option value="associate">Associate</option>
                    <option value="senior">Senior</option>
                </select>
               
            </div>
            
            <div class="form-group">
                <label for="position">Position<span class="required" >*</span></label>
                <select id="position"  required ">
                    <option value="" disabled selected>Select a role</option>
                    <option value="developer">Developer</option>
                    <option value="tester">Tester</option>
                    <option value="hr">HR</option>
                    <option value="finance">Finance</option>
                    <option value="manager">Manager</option>
                    <option value="designer">Designer</option>
                    <option value="projectManager">Project Manager</option>
                    <option value="sales">Sales</option>
                    <option value="marketing">Marketing</option>
                    <option value="customerSupport">Customer Support</option>
                </select>
            </div>
            <div id="roleError" class="error-message"></div>
            
            <div class="button-group">
                <div></div>
                <button onclick="nextPage(1)">Next</button>
            </div>
        </div>

        <!-- Card 2: Location -->
        <div class="card" id="page2">
            <h2 class="card-title">Location Selection</h2>
            
            <!-- <div class="card-info">
                <h3>Choose Your Location</h3>
                <p>Select your preferred work location from the available options.</p>
            </div> -->
            
            <div class="form-group">
                <label>Location <span class="required">*</span></label>
                <div class="location-options">
                    <div class="location-option" data-value="hyderabad" onclick="selectLocation(this, 'hyderabad')">
                        <div class="location-icon">🏙️</div>
                        <div class="location-name">Hyderabad</div>
                        <div class="location-description">Kondapur, Telangana</div>
                    </div>
                    <div class="location-option" data-value="pune" onclick="selectLocation(this, 'pune')">
                        <div class="location-icon">🏢</div>
                        <div class="location-name">Pune</div>
                        <div class="location-description">Hinjewadi IT Park, Maharashtra</div>
                    </div>
                    <div class="location-option" data-value="bangalore" onclick="selectLocation(this, 'bangalore')">
                        <div class="location-icon">🌆</div>
                        <div class="location-name">Bangalore</div>
                        <div class="location-description">Electronic City,B Karnataka</div>
                    </div>
                </div>
                <select id="location" required style="display: none;">
                    <option value="">Select Location</option>
                    <option value="hyderabad">Hyderabad</option>
                    <option value="pune">Pune</option>
                    <option value="bangalore">Bangalore</option>
                </select>
                <div id="locationError" class="error-message"></div>
            </div>
            
            <div class="button-group">
                <button class="prev" onclick="prevPage(2)">Previous</button>
                <button onclick="nextPage(2)">Next</button>
            </div>
        </div>

        <!-- Card 3: Personal Details -->
        <div class="card" id="page3">
            <h2 class="card-title">Personal Details</h2>
            <div class="form-group">
                <label>Full Name <span class="required">*</span></label>
                <input type="text" id="name" required placeholder="Enter your full name">
                <div id="nameError" class="error-message"></div>
            </div>
            <div class="form-group">
                <label>Email <span class="required">*</span></label>
                <input type="email" id="email" required placeholder="Enter your email address">
                <div id="emailError" class="error-message"></div>
            </div>
            <div class="form-group">
                <label>Phone Number <span class="required">*</span></label>
                <input type="tel" id="phone" required placeholder="Enter your 10-digit phone number">
                <div id="phoneError" class="error-message"></div>
            </div>
            <div class="form-group">
                <label>Guardian Name <span class="required">*</span></label>
                <input type="text" id="guardianName" required placeholder="Enter guardian's name">
                <div id="guardianNameError" class="error-message"></div>
            </div>
            <div class="form-group">
                <label>Guardian Number <span class="required">*</span></label>
                <input type="tel" id="guardianPhone" required placeholder="Enter guardian's 10-digit phone number">
                <div id="guardianPhoneError" class="error-message"></div>
            </div>
            <div class="form-group">
                <label>Current Address <span class="required">*</span></label>
                <input type="text" id="address" required placeholder="Enter your complete address">
                <div class="char-counter" id="addressCounter">0/40 characters</div>
                <div id="addressError" class="error-message"></div>
            </div>
            <div class="button-group">
                <button class="prev" onclick="prevPage(3)">Previous</button>
                <button onclick="nextPage(3)">Next</button>
            </div>
        </div>

        <!-- Card 4: Certification/Education -->
        <div class="card" id="page4">
            <h2 class="card-title">Educational Documents</h2>
            <div class="form-group"><label>SSC Certificate <span class="required">*</span></label>
                <div class="file-upload">
                    <label class="file-upload-label" id="sscLabel">
                        <span>Upload SSC Certificate</span>
                        <input type="file" id="ssc" class="file-upload" required accept=".pdf,.jpg,.jpeg,.png" onchange="updateFileName(this, 'sscLabel')">
                    </label>
                    <div class="file-name" id="sscFileName"></div>
                </div>
                <span id="sscFileName" class="file-name"></span>
                <span id="sscError" class="error-message"></span>
            </div>
            <div class="form-group">
                <label>HSC Certificate <span class="required">*</span></label>
                <div class="file-upload">
                    <label class="file-upload-label" id="hscLabel">
                        <span>Upload HSC Certificate</span>
                        <input type="file" id="hsc" class="file-upload" required accept=".pdf,.jpg,.jpeg,.png" onchange="updateFileName(this, 'hscLabel')">
                    </label>
                    <div class="file-name" id="hscFileName"></div>
                </div>
                <span id="hscFileName" class="file-name"></span>
    <span id="hscError" class="error-message"></span>
            </div>
            <div class="form-group">
                <label>UG Certificate <span class="required">*</span></label>
                <div class="file-upload">
                    <label class="file-upload-label" id="ugLabel">
                        <span>Upload UG Certificate</span>
                        <input type="file" id="ug" class="file-upload" required accept=".pdf,.jpg,.jpeg,.png" onchange="updateFileName(this, 'ugLabel')">
                    </label>
                    <div class="file-name" id="ugFileName"></div>
                </div>
                <span id="ugFileName" class="file-name"></span>
                <span id="ugError" class="error-message"></span>
            </div>
            <div class="form-group">
                <label>PG Certificate (Optional)</label>
                <div class="file-upload">
                    <label class="file-upload-label" id="pgLabel">
                        <span>Upload PG Certificate (if available)</span>
                        <input type="file" id="pg" class="file-upload" accept=".pdf,.jpg,.jpeg,.png" onchange="updateFileName(this, 'pgLabel')">
                    </label>
                    <span id="pgFileName" class="file-name"></span>
                    <span id="pgError" class="error-message"></span>
                </div>
            </div>
            <div class="button-group">
                <button class="prev" onclick="prevPage(4)">Previous</button>
                <button onclick="nextPage(4)">Next</button>
            </div>
        </div>

        <!-- Card 5: Previous Employment -->
        <div class="card" id="page5">
            <h2 class="card-title">Previous Employment Details</h2>
            <div class="form-group">
                <label>Experience Type:</label>
                <div class="custom-radio-container">
                    <div class="custom-radio">
                        <input type="radio" id="fresher" name="experienceType" value="fresher" checked>
                        <label for="fresher" class="radio-label">Fresher</label>
                    </div>
                    <div class="custom-radio">
                        <input type="radio" id="experienced" name="experienceType" value="experienced">
                        <label for="experienced" class="radio-label">Experienced</label>
                    </div>
                </div>
            </div>
            
            <!-- Previous Employment Fields (Initially Hidden) -->
            <div id="previousEmploymentFields">
                <h3>Previous Employment Details</h3>
                
                <div class="form-group">
                    <label for="prevCompany">Previous Company:</label>
                    <input type="text" id="prevCompany" name="prevCompany" maxlength="30">
                    <div id="prevCompanyError" class="error-message"></div>
                </div>
                
                <div class="form-group">
                    <label for="prevExperience">Years at Previous Company:</label>
                    <input type="number" id="prevExperience" name="prevExperience" maxlength="2">
                    <div id="prevExperienceError" class="error-message"></div>
                </div>
                
                <div class="form-group">
                    <label for="prevRole">Previous Role:</label>
                    <input type="text" id="prevRole" name="prevRole" maxlength="15">
                    <div id="prevRoleError" class="error-message"></div>
                </div>
                
                <div class="form-group">
                    <label>Relieving Letter:</label>
                    <div class="file-upload">
                        <label id="relievingLetterLabel" for="relievingLetter" class="file-upload-label">
                            <span>Choose File</span>
                        </label>
                        <input type="file" id="relievingLetter" name="relievingLetter" accept=".pdf">
                        <div id="relievingLetterFileName" class="file-name"></div>
                    </div>
                    <div id="relievingLetterError" class="error-message"></div>
                </div>
            </div>
            <div class="button-group">
                <button type="button" onclick="prevPage(5)">Previous</button>
                <button type="button" onclick="submitForm()">Submit</button>
                
            </div>
        </div>
    </div>

    <script>
/// Utility function to convert file to base64

function getBase64(file) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = error => reject(error);
    });
}

let currentPage = 1;
const totalPages = 5;

function updateProgressBar() {
    const progress = (currentPage - 1) / (totalPages - 1) * 100;
    document.getElementById('progress').style.width = `${progress}%`;
}
// Updated function to show filename more clearly with check icon
function updateFileName(input, labelId) {
    const fileName = input.files[0]?.name;
    const fileNameElement = document.getElementById(input.id + 'FileName');
    
    if (fileName) {
        // Create a display of the filename with styling
        fileNameElement.textContent = fileName + ' ✓';
        fileNameElement.style.display = 'block';
        fileNameElement.style.marginTop = '5px';
        fileNameElement.style.color = '#2ecc71';
        fileNameElement.style.fontWeight = 'bold';
        
        document.getElementById(labelId).querySelector('span').textContent = 'File Selected';
        
        // Clear error message when a file is selected
        const errorElement = document.getElementById(`${input.id}Error`);
        if (errorElement) {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
        }
    } else {
        fileNameElement.textContent = '';
        document.getElementById(labelId).querySelector('span').textContent = 'Choose File';
    }
}

function refreshPage() {
    resetForm();
}

function clearErrors() {
    const errorElements = document.querySelectorAll('.error-message');
    errorElements.forEach(el => el.textContent = '');
}

// Consistent validation function for names
function validateName(name) {
    // Allow alphabets and spaces, with min 5 and max 30 characters
    const nameRegex = /^[A-Za-z\s]{5,30}$/;
    return nameRegex.test(name);
}

// Function to restrict input to only alphabets and spaces
function restrictToAlphabetsAndSpaces(input) {
    // Check if first character is space and prevent it
    if (input.value.length > 0 && input.value.charAt(0) === ' ') {
        input.value = input.value.substring(1);
    }
    
    // Replace anything that's not a letter or space
    input.value = input.value.replace(/[^A-Za-z\s]/g, '');
    
    // Prevent consecutive spaces
    input.value = input.value.replace(/\s\s+/g, ' ');
    
    // Limit length to 30 characters
    if (input.value.length > 30) {
        input.value = input.value.slice(0, 30);
    }
}

// Function to validate company name
function validateCompanyName(name) {
    // Allow alphabets and spaces, with min 5 and max 30 characters
    const nameRegex = /^[A-Za-z\s]{5,30}$/;
    return nameRegex.test(name);
}

// Function to validate role
function validateRole(role) {
    // Allow alphabets and spaces, with min 5 and max 15 characters
    const roleRegex = /^[A-Za-z\s]{5,15}$/;
    return roleRegex.test(role);
}

// Function to validate years of experience
function validateYearsOfExperience(years) {
    // Allow only 1 or 2 digits (1-99)
    const yearsRegex = /^\d{1,2}$/;
    return yearsRegex.test(years);
}

// Function to restrict input to only 2 digits
function restrictToTwoDigits(input) {
    input.value = input.value.replace(/[^0-9]/g, '');
    if (input.value.length > 2) {
        input.value = input.value.slice(0, 2);
    }
}

function validateEmail(email) {
    const emailRegex = /^[^\s@]+@(gmail\.com|yahoo\.com)$/;
    return emailRegex.test(email);
}

function validatePhone(phone) {
    const phoneRegex = /^\d{10}$/;
    return phoneRegex.test(phone);
}

// Function to restrict input to only digits
function restrictToDigits(input) {
    input.value = input.value.replace(/[^0-9]/g, '');
    if (input.value.length > 10) {
        input.value = input.value.slice(0, 10);
    }
}

// Function to select role with visual feedback
function selectRole(element, value) {
    const allRoles = document.querySelectorAll('.role-option');
    allRoles.forEach(role => role.classList.remove('selected'));
    
    element.classList.add('selected');
    document.getElementById('role').value = value;
    
    // Clear error message when a selection is made
    document.getElementById('roleError').textContent = '';
    document.getElementById('roleError').style.display = 'none';
}

// Function to select location with visual feedback
function selectLocation(element, value) {
    const allLocations = document.querySelectorAll('.location-option');
    allLocations.forEach(location => location.classList.remove('selected'));
    
    element.classList.add('selected');
    document.getElementById('location').value = value;
    
    // Clear error message when a selection is made
    document.getElementById('locationError').textContent = '';
    document.getElementById('locationError').style.display = 'none';
}

// Updated function to show filename more clearly
function updateFileName(input, labelId) {
    const fileName = input.files[0]?.name;
    const fileNameElement = document.getElementById(input.id + 'FileName');
    if (fileName) {
        // Create a display of the filename with styling
        fileNameElement.textContent = fileName;
        fileNameElement.style.display = 'block';
        fileNameElement.style.marginTop = '5px';
        fileNameElement.style.color = '#2ecc71';
        fileNameElement.style.fontWeight = 'bold';
        
        document.getElementById(labelId).querySelector('span').textContent = 'File Selected';
        
        // Clear error message when a file is selected
        const errorElement = document.getElementById(`${input.id}Error`);
        if (errorElement) {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
        }
    } else {
        fileNameElement.textContent = '';
        document.getElementById(labelId).querySelector('span').textContent = 'Choose File';
    }
}
const fileFields = ['ssc', 'hsc', 'ug', 'pg', 'relievingLetter'];
    fileFields.forEach(field => {
        const fileNameElement = document.getElementById(field + 'FileName');
        if (!fileNameElement) {
            const newFileNameElement = document.createElement('div');
            newFileNameElement.id = field + 'FileName';
            newFileNameElement.className = 'file-name';
            newFileNameElement.style.display = 'none';
            document.getElementById(field).parentElement.appendChild(newFileNameElement);
        }
    });


// Function to limit input length
function limitInputLength(input, maxLength) {
    if (input.value.length > maxLength) {
        input.value = input.value.slice(0, maxLength);
    }
    return input.value.length;
}

// Function to update character counter
function updateCharCounter(input, counterId, maxLength) {
    const length = limitInputLength(input, maxLength);
    document.getElementById(counterId).textContent = `${length}/${maxLength} characters`;
}

// Function to toggle previous employment fields based on experience type
function togglePreviousEmploymentFields() {
    const isExperienced = document.getElementById('experienced').checked;
    const prevEmploymentFields = document.getElementById('previousEmploymentFields');
    const prevCompanyError = document.getElementById('prevCompanyError');
    const prevExperienceError = document.getElementById('prevExperienceError');
    const prevRoleError = document.getElementById('prevRoleError');
    const relievingLetterError = document.getElementById('relievingLetterError');
    
    if (isExperienced) {
        prevEmploymentFields.style.display = 'block';
        
        // Make fields required
        document.getElementById('prevCompany').setAttribute('required', '');
        document.getElementById('prevExperience').setAttribute('required', '');
        document.getElementById('prevRole').setAttribute('required', '');
        document.getElementById('relievingLetter').setAttribute('required', '');
    } else {
        prevEmploymentFields.style.display = 'none';
        
        // Remove required attribute
        document.getElementById('prevCompany').removeAttribute('required');
        document.getElementById('prevExperience').removeAttribute('required');
        document.getElementById('prevRole').removeAttribute('required');
        document.getElementById('relievingLetter').removeAttribute('required');
        
        // Clear values
        document.getElementById('prevCompany').value = '';
        document.getElementById('prevExperience').value = '';
        document.getElementById('prevRole').value = '';
        document.getElementById('relievingLetter').value = '';
        
        // Hide error messages
        if (prevCompanyError) prevCompanyError.style.display = 'none';
        if (prevExperienceError) prevExperienceError.style.display = 'none';
        if (prevRoleError) prevRoleError.style.display = 'none';
        if (relievingLetterError) relievingLetterError.style.display = 'none';
    }
}


// Function to validate input field in real-time
function validateInputField(input, errorId, validationFunction, errorMessage) {
    const errorElement = document.getElementById(errorId);
    if (!errorElement) return;
    
    if (!input.value.trim()) {
        errorElement.textContent = 'This field is required';
        errorElement.style.display = 'block';
        input.style.borderColor = 'red';
    } else if (!validationFunction(input.value)) {
        errorElement.textContent = errorMessage;
        errorElement.style.display = 'block';
        input.style.borderColor = 'red';
    } else {
        errorElement.textContent = '';
        errorElement.style.display = 'none';
        input.style.borderColor = '#2ecc71';
    }
}

// Function to validate page inputs
function validatePage(page) {
    clearErrors();
    const currentForm = document.getElementById(`page${page}`);
    const requiredInputs = currentForm.querySelectorAll('[required]');
    let valid = true;

    requiredInputs.forEach(input => {
        const inputId = input.id;
        const errorElement = document.getElementById(`${inputId}Error`);
        
        // Ensure error element exists
        if (!errorElement) {
            console.error(`Error element not found for ${inputId}`);
            return;
        }

        // Reset input styles
        input.style.borderColor = '#ddd';
        // Make sure error messages are visible
        errorElement.style.display = 'block';
        errorElement.style.color = 'red';
        errorElement.style.fontSize = '12px';
        errorElement.style.marginTop = '5px';

        // Validate specific fields
        switch(inputId) {
            case 'name':
                if (!input.value.trim()) {
                    errorElement.textContent = 'Name is required';
                    input.style.borderColor = 'red';
                    valid = false;
                } else if (!validateName(input.value)) {
                    errorElement.textContent = 'Name must be 5-30 alphabets and spaces';
                    input.style.borderColor = 'red';
                    valid = false;
                } else {
                    input.style.borderColor = '#2ecc71';
                    input.classList.add('validated');
                    errorElement.style.display = 'none';
                }
                break;
            case 'guardianName':
                if (!input.value.trim()) {
                    errorElement.textContent = 'Guardian name is required';
                    input.style.borderColor = 'red';
                    valid = false;
                } else if (!validateName(input.value)) {
                    errorElement.textContent = 'Guardian name must be 5-30 alphabets and spaces';
                    input.style.borderColor = 'red';
                    valid = false;
                } else {
                    input.style.borderColor = '#2ecc71';
                    input.classList.add('validated');
                    errorElement.style.display = 'none';
                }
                break;
            case 'email':
                if (!input.value.trim()) {
                    errorElement.textContent = 'Email is required';
                    input.style.borderColor = 'red';
                    valid = false;
                } else if (!validateEmail(input.value)) {
                    errorElement.textContent = 'Email must end with gmail.com or yahoo.com';
                    input.style.borderColor = 'red';
                    valid = false;
                } else {
                    input.style.borderColor = '#2ecc71';
                    input.classList.add('validated');
                    errorElement.style.display = 'none';
                }
                break;
            case 'phone':
                if (!input.value.trim()) {
                    errorElement.textContent = 'Phone number is required';
                    input.style.borderColor = 'red';
                    valid = false;
                } else if (!validatePhone(input.value)) {
                    errorElement.textContent = 'Phone number must be 10 digits';
                    input.style.borderColor = 'red';
                    valid = false;
                } else {
                    // Check if phone and guardian phone are the same
                    const guardianPhone = document.getElementById('guardianPhone').value;
                    if (guardianPhone && input.value === guardianPhone) {
                        errorElement.textContent = 'Phone number cannot be the same as guardian phone';
                        input.style.borderColor = 'red';
                        valid = false;
                    } else {
                        input.style.borderColor = '#2ecc71';
                        input.classList.add('validated');
                        errorElement.style.display = 'none';
                    }
                }
                break;
            case 'guardianPhone':
                if (!input.value.trim()) {
                    errorElement.textContent = 'Guardian phone number is required';
                    input.style.borderColor = 'red';
                    valid = false;
                } else if (!validatePhone(input.value)) {
                    errorElement.textContent = 'Guardian phone number must be 10 digits';
                    input.style.borderColor = 'red';
                    valid = false;
                } else {
                    // Check if phone and guardian phone are the same
                    const phone = document.getElementById('phone').value;
                    if (phone && input.value === phone) {
                        errorElement.textContent = 'Guardian phone cannot be the same as your phone';
                        input.style.borderColor = 'red';
                        valid = false;
                    } else {
                        input.style.borderColor = '#2ecc71';
                        input.classList.add('validated');
                        errorElement.style.display = 'none';
                    }
                }
                break;
            case 'address':
                if (!input.value.trim()) {
                    errorElement.textContent = 'Address is required';
                    input.style.borderColor = 'red';
                    valid = false;
                } else if (input.value.length > 40) {
                    errorElement.textContent = 'Address cannot exceed 40 characters';
                    input.style.borderColor = 'red';
                    valid = false;
                } else {
                    input.style.borderColor = '#2ecc71';
                    input.classList.add('validated');
                    errorElement.style.display = 'none';
                }
                break;
            case 'location':
                if (!input.value) {
                    document.getElementById('locationError').textContent = 'Location is required';
                    document.getElementById('locationError').style.display = 'block';
                    document.getElementById('locationError').style.color = 'red';
                    document.getElementById('locationError').style.fontSize = '12px';
                    document.getElementById('locationError').style.marginTop = '5px';
                    valid = false;
                } else {
                    document.getElementById('locationError').style.display = 'none';
                }
                break;
            case 'role':
                if (!input.value) {
                    document.getElementById('roleError').textContent = 'Role is required';
                    document.getElementById('roleError').style.display = 'block';
                    document.getElementById('roleError').style.color = 'red';
                    document.getElementById('roleError').style.fontSize = '12px';
                    document.getElementById('roleError').style.marginTop = '5px';
                    valid = false;
                } else {
                    document.getElementById('roleError').style.display = 'none';
                }
                break;
            case 'experience':
                if (!input.value.trim()) {
                    errorElement.textContent = 'Experience is required';
                    input.style.borderColor = 'red';
                    valid = false;
                } else {
                    input.style.borderColor = '#2ecc71';
                    input.classList.add('validated');
                    errorElement.style.display = 'none';
                }
                break;
            case 'prevCompany':
                if (!input.value.trim()) {
                    errorElement.textContent = 'Company name is required';
                    input.style.borderColor = 'red';
                    valid = false;
                } else if (!validateCompanyName(input.value)) {
                    errorElement.textContent = 'Company name must be 5-30 alphabets and spaces';
                    input.style.borderColor = 'red';
                    valid = false;
                } else {
                    input.style.borderColor = '#2ecc71';
                    input.classList.add('validated');
                    errorElement.style.display = 'none';
                }
                break;
            case 'prevExperience':
                if (!input.value.trim()) {
                    errorElement.textContent = 'Years of experience is required';
                    input.style.borderColor = 'red';
                    valid = false;
                } else if (!validateYearsOfExperience(input.value)) {
                    errorElement.textContent = 'Years of experience must be 1-2 digits only';
                    input.style.borderColor = 'red';
                    valid = false;
                } else {
                    input.style.borderColor = '#2ecc71';
                    input.classList.add('validated');
                    errorElement.style.display = 'none';
                }
                break;
            case 'prevRole':
                if (!input.value.trim()) {
                    errorElement.textContent = 'Role is required';
                    input.style.borderColor = 'red';
                    valid = false;
                } else if (!validateRole(input.value)) {
                    errorElement.textContent = 'Role must be 5-15 alphabets and spaces';
                    input.style.borderColor = 'red';
                    valid = false;
                } else {
                    input.style.borderColor = '#2ecc71';
                    input.classList.add('validated');
                    errorElement.style.display = 'none';
                }
                break;
            case 'ssc':
            case 'hsc':
            case 'ug':
                if (input.files.length === 0) {
                    errorElement.textContent = 'This certificate is required';
                    errorElement.style.display = 'block';
                    valid = false;
                } else {
                    input.style.borderColor = '#2ecc71';
                    input.classList.add('validated');
                    errorElement.style.display = 'none';
                }
                break;
            case 'relievingLetter':
                // Check if experienced is checked
                if (document.getElementById('experienced').checked) {
                    if (input.files.length === 0) {
                        errorElement.textContent = 'Relieving letter is required for experienced professionals';
                        errorElement.style.display = 'block';
                        valid = false;
                    } else {
                        input.style.borderColor = '#2ecc71';
                        input.classList.add('validated');
                        errorElement.style.display = 'none';
                    }
                }
                break;
            default:
                if (input.hasAttribute('required') && !input.value.trim()) {
                    errorElement.textContent = 'This field is required';
                    input.style.borderColor = 'red';
                    valid = false;
                } else {
                    errorElement.style.display = 'none';
                }
        }
    });

    return valid;
}

function nextPage(page) {
    if (validatePage(page)) {
        document.getElementById(`page${page}`).classList.remove('active');
        document.getElementById(`page${page + 1}`).classList.add('active');
        currentPage = page + 1;
        updateProgressBar();
    }
}

function prevPage(page) {
    document.getElementById(`page${page}`).classList.remove('active');
    document.getElementById(`page${page - 1}`).classList.add('active');
    currentPage = page - 1;
    updateProgressBar();
}

// Reset form and return to first page
function resetFormAndReturn() {
    resetForm();
    // Return to first page
    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
    document.getElementById('page1').classList.add('active');
    currentPage = 1;
    updateProgressBar();
}

// Function to reset the form
function resetForm() {
    // Clear all input fields
    const inputs = document.querySelectorAll('input[type="text"], input[type="email"], input[type="file"]');
    inputs.forEach(input => {
        input.value = '';
        input.style.borderColor = '#ddd';
        input.classList.remove('validated');
    });
    
    // Reset radio buttons and checkboxes
    document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
        input.checked = false;
    });
    
    // Reset role and location selections
    document.querySelectorAll('.role-option, .location-option').forEach(element => {
        element.classList.remove('selected');
    });
    document.getElementById('role').value = '';
    document.getElementById('location').value = '';
    
    // Reset file input displays
    document.querySelectorAll('.file-name').forEach(span => {
        span.textContent = '';
        span.style.display = 'none';
    });
    
    // Reset file input labels
    document.querySelectorAll('label[id$="Label"] span').forEach(span => {
        span.textContent = 'Choose File';
    });
    
    // Hide previous employment fields
    document.getElementById('previousEmploymentFields').style.display = 'none';
    
    // Clear all error messages
    clearErrors();
}

async function submitForm() {
    try {
        // Check if user is experienced and validate accordingly
        const experiencedRadio = document.getElementById('experienced');
        const isExperienced = experiencedRadio && experiencedRadio.checked;
        
        // If user is experienced, make sure previous employment fields are required
        if (isExperienced) {
            const prevCompany = document.getElementById('prevCompany');
            const prevExperience = document.getElementById('prevExperience');
            const prevRole = document.getElementById('prevRole');
            const relievingLetter = document.getElementById('relievingLetter');
            
            if (prevCompany) prevCompany.setAttribute('required', '');
            if (prevExperience) prevExperience.setAttribute('required', '');
            if (prevRole) prevRole.setAttribute('required', '');
            if (relievingLetter) relievingLetter.setAttribute('required', '');
        }
        
        if (validatePage(5)) {
            // Add safe element getters
            const safeGetElement = (id) => {
                const element = document.getElementById(id);
                if (!element) {
                    console.warn(`Element with id '${id}' not found`);
                    return null;
                }
                return element;
            };
            
            const safeGetValue = (id) => {
                const element = safeGetElement(id);
                return element ? element.value : '';
            };
            
            const safeGetFiles = (id) => {
                const element = safeGetElement(id);
                return element && element.files && element.files[0] ? element.files[0] : null;
            };
            
            // Handle required document files
            const documents = {
                ssc: safeGetFiles('ssc') ? await getBase64(safeGetFiles('ssc')) : null,
                hsc: safeGetFiles('hsc') ? await getBase64(safeGetFiles('hsc')) : null,
                ug: safeGetFiles('ug') ? await getBase64(safeGetFiles('ug')) : null,
                pg: safeGetFiles('pg') ? await getBase64(safeGetFiles('pg')) : null
            };

            // Handle relieving letter if exists
            const relievingLetterFile = safeGetFiles('relievingLetter');
            const relievingLetter = relievingLetterFile ? await getBase64(relievingLetterFile) : null;

            const formData = {
                role: safeGetValue('role'),
                experience: safeGetValue('experience'),
                location: safeGetValue('location'),
                name: safeGetValue('name'),
                email: safeGetValue('email'),
                phone: safeGetValue('phone'),
                guardianName: safeGetValue('guardianName'),
                guardianPhone: safeGetValue('guardianPhone'),
                address: safeGetValue('address'),
                documents: {
                    ssc: safeGetFiles('ssc') ? {
                        name: safeGetFiles('ssc').name,
                        data: documents.ssc,
                        type: safeGetFiles('ssc').type
                    } : null,
                    hsc: safeGetFiles('hsc') ? {
                        name: safeGetFiles('hsc').name,
                        data: documents.hsc,
                        type: safeGetFiles('hsc').type
                    } : null,
                    ug: safeGetFiles('ug') ? {
                        name: safeGetFiles('ug').name,
                        data: documents.ug,
                        type: safeGetFiles('ug').type
                    } : null,
                    pg: safeGetFiles('pg') ? {
                        name: safeGetFiles('pg').name,
                        data: documents.pg,
                        type: safeGetFiles('pg').type
                    } : null
                },
                previousEmployment: isExperienced ? {
                    company: safeGetValue('prevCompany'),
                    experience: safeGetValue('prevExperience'),
                    role: safeGetValue('prevRole'),
                    relievingLetter: relievingLetterFile ? {
                        name: relievingLetterFile.name,
                        data: relievingLetter,
                        type: relievingLetterFile.type
                    } : null
                } : null,
                status: 'pending',
                submissionDate: new Date().toISOString()
            };

            let employees = JSON.parse(localStorage.getItem('employees') || '[]');
            employees.push(formData);
            localStorage.setItem('employees', JSON.stringify(employees));

            alert('Form submitted successfully!');
            resetForm();
        }
    } catch (error) {
        alert('Error processing files: ' + error.message);
        console.error('Form submission error:', error);
    }
}

// Add event listeners after DOM content is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Real-time validation for previous employment fields
    document.getElementById('prevCompany').addEventListener('input', function() {
        restrictToAlphabetsAndSpaces(this);
        validateInputField(this, 'prevCompanyError', validateCompanyName, 'Company name must be 5-30 alphabets and spaces');
    });
    
    document.getElementById('prevExperience').addEventListener('input', function() {
        restrictToTwoDigits(this);
        validateInputField(this, 'prevExperienceError', validateYearsOfExperience, 'Years of experience must be 1-2 digits only');
    });
    
    document.getElementById('prevRole').addEventListener('input', function() {
        restrictToAlphabetsAndSpaces(this);
        validateInputField(this, 'prevRoleError', validateRole, 'Role must be 5-15 alphabets and spaces');
    });
    document.getElementById('relievingLetter').addEventListener('change', function() {
        updateFileName(this, 'relievingLetterLabel');
        const errorElement = document.getElementById('relievingLetterError');
        
        if (document.getElementById('experienced').checked && this.files.length === 0) {
            errorElement.textContent = 'Relieving letter is required for experienced professionals';
            errorElement.style.display = 'block';
        } else {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
        }
    });
    
    // Initialize previous employment visibility
    togglePreviousEmploymentFields();
    
    // Event listener for experience type change
    document.getElementById('experienced').addEventListener('change', togglePreviousEmploymentFields);
    document.getElementById('fresher').addEventListener('change', togglePreviousEmploymentFields);
});
document.getElementById('ssc').addEventListener('change', function() {
        updateFileName(this, 'sscLabel');
        const errorElement = document.getElementById('sscError');
        
        if (this.files.length === 0) {
            errorElement.textContent = 'This certificate is required';
            errorElement.style.display = 'block';
        } else {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
        }
    });
    
    document.getElementById('hsc').addEventListener('change', function() {
        updateFileName(this, 'hscLabel');
        const errorElement = document.getElementById('hscError');
        
        if (this.files.length === 0) {
            errorElement.textContent = 'This certificate is required';
            errorElement.style.display = 'block';
        } else {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
        }
    });
    
    document.getElementById('ug').addEventListener('change', function() {
        updateFileName(this, 'ugLabel');
        const errorElement = document.getElementById('ugError');
        
        if (this.files.length === 0) {
            errorElement.textContent = 'This certificate is required';
            errorElement.style.display = 'block';
        } else {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
        }
    });
    
    document.getElementById('pg').addEventListener('change', function() {
        updateFileName(this, 'pgLabel');
    });
function resetForm() {
    // Reset all inputs
    document.querySelectorAll('input').forEach(input => {
        input.value = '';
        input.style.borderColor = '#ddd';
        input.classList.remove('validated');
    });

    // Reset select elements
    document.querySelectorAll('select').forEach(select => {
        select.selectedIndex = 0;
        select.style.borderColor = '#ddd';
    });

    // Reset role and location selections
    document.querySelectorAll('.role-option, .location-option').forEach(option => {
        option.classList.remove('selected');
    });

    // Reset file upload labels
    document.querySelectorAll('.file-upload-label span').forEach(span => {
        span.textContent = 'Choose File';
    });

    // Reset file names
    document.querySelectorAll('.file-name').forEach(div => {
        div.textContent = '';
    });

    // Clear error messages
    document.querySelectorAll('.error-message').forEach(el => {
        el.textContent = '';
        el.style.display = 'none';
    });

    // Reset address counter
    document.getElementById('addressCounter').textContent = '0/40 characters';

    // Reset page navigation
    document.getElementById('page1').classList.add('active');
    for (let i = 2; i <= totalPages; i++) {
        document.getElementById(`page${i}`).classList.remove('active');
    }
    
    currentPage = 1;
    updateProgressBar();
}

// Initialize on load
window.onload = function() {
    updateProgressBar();
    const fileLabels = {
        'sscLabel': 'supported documents (PDF or image formats, max 5MB)',
        'hscLabel': 'supported documents (PDF or image formats, max 5MB)',
        'ugLabel': 'supported documents (PDF or image formats, max 5MB)',
        'pgLabel': 'supported documents if available (PDF or image formats, max 5MB)',
        'relievingLetterLabel': 'supported documents (PDF format, max 5MB)'
    };
    
    // Add hints to file upload labels
    for (const [labelId, hintText] of Object.entries(fileLabels)) {
        const label = document.getElementById(labelId);
        if (label) {
            const hint = document.createElement('div');
            hint.className = 'file-hint';
            hint.textContent = hintText;
            hint.style.fontSize = '12px';
            hint.style.color = '#666';
            hint.style.marginTop = '2px';
            label.parentNode.insertBefore(hint, label.nextSibling);
        }
    }
    
    
    // Add event listeners for name fields with real-time validation
    document.getElementById('name').addEventListener('input', function() {
        restrictToAlphabetsAndSpaces(this);
        const errorElement = document.getElementById('nameError');
        
        // Validate immediately while typing
        if (this.value.trim() !== '' && !validateName(this.value)) {
            errorElement.textContent = 'Name must be 5-30 alphabets and spaces';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else if (this.value.trim() === '') {
            errorElement.textContent = 'Name is required';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
            this.style.borderColor = '#2ecc71';
        }
    });
    
    document.getElementById('guardianName').addEventListener('input', function() {
        restrictToAlphabetsAndSpaces(this);
        const errorElement = document.getElementById('guardianNameError');
        
        // Validate immediately while typing
        if (this.value.trim() !== '' && !validateName(this.value)) {
            errorElement.textContent = 'Guardian name must be 5-30 alphabets and spaces';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else if (this.value.trim() === '') {
            errorElement.textContent = 'Guardian name is required';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
            this.style.borderColor = '#2ecc71';
        }
    });
    
    // Add event listeners for phone fields with real-time validation
    document.getElementById('phone').addEventListener('input', function() {
        restrictToDigits(this);
        const errorElement = document.getElementById('phoneError');
        
        // Validate immediately while typing
        if (this.value.trim() !== '' && !validatePhone(this.value)) {
            errorElement.textContent = 'Phone number must be 10 digits';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else if (this.value.trim() === '') {
            errorElement.textContent = 'Phone number is required';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else {
            // Check if it matches guardian phone
            const guardianPhone = document.getElementById('guardianPhone').value;
            if (guardianPhone && this.value === guardianPhone) {
                errorElement.textContent = 'Phone number cannot be the same as guardian phone';
                errorElement.style.display = 'block';
                this.style.borderColor = 'red';
            } else {
                errorElement.textContent = '';
                errorElement.style.display = 'none';
                this.style.borderColor = '#2ecc71';
            }
        }
    });
    
    document.getElementById('guardianPhone').addEventListener('input', function() {
        restrictToDigits(this);
        const errorElement = document.getElementById('guardianPhoneError');
        
        // Validate immediately while typing
        if (this.value.trim() !== '' && !validatePhone(this.value)) {
            errorElement.textContent = 'Guardian phone must be 10 digits';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else if (this.value.trim() === '') {
            errorElement.textContent = 'Guardian phone is required';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else {
            // Check if it matches user's phone
            const phone = document.getElementById('phone').value;
            if (phone && this.value === phone) {
                errorElement.textContent = 'Guardian phone cannot be the same as your phone';
                errorElement.style.display = 'block';
                this.style.borderColor = 'red';
            } else {
                errorElement.textContent = '';
                errorElement.style.display = 'none';
                this.style.borderColor = '#2ecc71';
            }
        }
    });
    document.getElementById('fresher').addEventListener('change', togglePreviousEmploymentFields);
    document.getElementById('experienced').addEventListener('change', togglePreviousEmploymentFields);
    
    // Add event listener for address field with real-time validation
    document.getElementById('address').addEventListener('input', function() {
        updateCharCounter(this, 'addressCounter', 40);
        const errorElement = document.getElementById('addressError');
        
        // Validate immediately while typing
        if (this.value.trim() === '') {
            errorElement.textContent = 'Address is required';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else if (this.value.length > 40) {
            errorElement.textContent = 'Address cannot exceed 40 characters';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
            this.style.borderColor = '#2ecc71';
        }
    });
    
    // Add event listener for email field with real-time validation
    document.getElementById('email').addEventListener('input', function() {
        const errorElement = document.getElementById('emailError');
        
        // Validate immediately while typing
        if (this.value.trim() === '') {
            errorElement.textContent = 'Email is required';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else if (!validateEmail(this.value)) {
            errorElement.textContent = 'Email must end with gmail.com or yahoo.com';
            errorElement.style.display = 'block';
            this.style.borderColor = 'red';
        } else {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
            this.style.borderColor = '#2ecc71';
        }
    });
    
    // Add event listener for experience field with real-time validation
    document.getElementById('experience').addEventListener('input', function() {
        const errorElement = document.getElementById('experienceError');
        if (errorElement) {
            if (this.value.trim() === '') {
                errorElement.textContent = 'Experience is required';
                errorElement.style.display = 'block';
                this.style.borderColor = 'red';
            } else {
                errorElement.textContent = '';
                errorElement.style.display = 'none';
                this.style.borderColor = '#2ecc71';
            }
        }
    });
    
    // Add event listeners for file inputs
    document.getElementById('ssc').addEventListener('change', function() {
        updateFileName(this, 'sscLabel');
        const errorElement = document.getElementById('sscError');
        
        if (this.files.length === 0) {
            errorElement.textContent = 'This certificate is required';
            errorElement.style.display = 'block';
        } else {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
        }
    });
    
    document.getElementById('hsc').addEventListener('change', function() {
        updateFileName(this, 'hscLabel');
        const errorElement = document.getElementById('hscError');
        
        if (this.files.length === 0) {
            errorElement.textContent = 'This certificate is required';
            errorElement.style.display = 'block';
        } else {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
        }
    });
    
    document.getElementById('ug').addEventListener('change', function() {
        updateFileName(this, 'ugLabel');
        const errorElement = document.getElementById('ugError');
        
        if (this.files.length === 0) {
            errorElement.textContent = 'This certificate is required';
            errorElement.style.display = 'block';
        } else {
            errorElement.textContent = '';
            errorElement.style.display = 'none';
        }
    });
    
    document.getElementById('pg').addEventListener('change', function() {
        updateFileName(this, 'pgLabel');
    });
    
    document.getElementById('relievingLetter').addEventListener('change', function() {
        updateFileName(this, 'relievingLetterLabel');
    });
    // Make sure all error message containers have proper styling
    document.querySelectorAll('.error-message').forEach(el => {
        el.style.display = 'none'; // Hide initially
        el.style.color = 'red';
        el.style.fontSize = '12px';
        el.style.marginTop = '5px';
    });
    
    // Add info icons for email field
    const emailLabel = document.querySelector('label[for="email"]');
    const infoIcon = document.createElement('span');
    infoIcon.className = 'info-icon';
    infoIcon.innerHTML = ' ℹ️';
    infoIcon.title = 'Email must end with gmail.com or yahoo.com';
    emailLabel.appendChild(infoIcon);
    
    // Add info icons for name fields
    const nameLabel = document.querySelector('label[for="name"]');
    const nameInfoIcon = document.createElement('span');
    nameInfoIcon.className = 'info-icon';
    nameInfoIcon.innerHTML = ' ℹ️';
    nameInfoIcon.title = 'Name must be 5-30 alphabets and spaces';
    nameLabel.appendChild(nameInfoIcon);
    
    const guardianNameLabel = document.querySelector('label[for="guardianName"]');
    const guardianNameInfoIcon = document.createElement('span');
    guardianNameInfoIcon.className = 'info-icon';
    guardianNameInfoIcon.innerHTML = ' ℹ️';
    guardianNameInfoIcon.title = 'Guardian name must be 5-30 alphabets and spaces';
    guardianNameLabel.appendChild(guardianNameInfoIcon);
    
    // Add info icons for phone fields
    const phoneLabel = document.querySelector('label[for="phone"]');
    const phoneInfoIcon = document.createElement('span');
    phoneInfoIcon.className = 'info-icon';
    phoneInfoIcon.innerHTML = ' ℹ️';
    phoneInfoIcon.title = 'Phone number must be 10 digits and different from guardian phone';
    phoneLabel.appendChild(phoneInfoIcon);
    
    const guardianPhoneLabel = document.querySelector('label[for="guardianPhone"]');
    const guardianPhoneInfoIcon = document.createElement('span');
    guardianPhoneInfoIcon.className = 'info-icon';
    guardianPhoneInfoIcon.innerHTML = ' ℹ️';
    guardianPhoneInfoIcon.title = 'Guardian phone must be 10 digits and different from your phone';
    guardianPhoneLabel.appendChild(guardianPhoneInfoIcon);
    
    // Add info icon for address field
    const addressLabel = document.querySelector('label[for="address"]');
    const addressInfoIcon = document.createElement('span');
    addressInfoIcon.className = 'info-icon';
    addressInfoIcon.innerHTML = ' ℹ️';
    addressInfoIcon.title = 'Address cannot exceed 40 characters';
    addressLabel.appendChild(addressInfoIcon);
};
</script>
</body>
</html>